[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Home",
    "section": "",
    "text": "This repository contains examples and documentation for accessing and applying existing research computing resources available to NOAA Fisheries staff. Example code and documentation were presented as a part of the National Stock Assessment Seminar series (slides).\n\n\n\n Back to top",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "assets/web-slides.html",
    "href": "assets/web-slides.html",
    "title": "Seminar slides",
    "section": "",
    "text": "Seminar slides from the NOAA National Stock Assessment Science Seminar Series presentation.\n    View slides in full screen\n       \n      \n    \n  \n\n\n\n Back to top",
    "crumbs": [
      "Seminar slides"
    ]
  },
  {
    "objectID": "assets/web-about-mo.html",
    "href": "assets/web-about-mo.html",
    "title": "Megumi Oshima",
    "section": "",
    "text": "Megumi Oshima has been working at the Pacific Islands Fisheries Science Center since 2021. She works mostly on domestic and territorial bottomfish stocks and is interested in Openscience and creating reproducible and transparent workflows. Before joining PIFSC, she was a graduate student at University of Southern Mississippi where she got her PhD in Coastal Sciences.\n\n\n Back to top",
    "crumbs": [
      "Contact us",
      "Megumi Oshima"
    ]
  },
  {
    "objectID": "assets/presentation.html#test-slide",
    "href": "assets/presentation.html#test-slide",
    "title": "Operationalizing available research computing resources for stock assessment",
    "section": "Test slide",
    "text": "Test slide\n\nThis is a test link.\nThis is some emphasized text.\nHere is some text that is hidden and waiting for later."
  },
  {
    "objectID": "assets/presentation.html#test-slide-1",
    "href": "assets/presentation.html#test-slide-1",
    "title": "Operationalizing available research computing resources for stock assessment",
    "section": "Test slide",
    "text": "Test slide\n\nThis is a test link.\nThis is some emphasized text.\nHere is some text that is hidden and waiting for later. And now it appears!"
  },
  {
    "objectID": "assets/presentation.html#what-do-we-want-to-do",
    "href": "assets/presentation.html#what-do-we-want-to-do",
    "title": "Operationalizing available research computing resources for stock assessment",
    "section": "What do we want to do?",
    "text": "What do we want to do?\n\n\nLeverage high-throughput or high-performance computing solutions to run stock assessment models\n\n\nRun more/bigger models in less time"
  },
  {
    "objectID": "assets/presentation.html#how-can-we-do-this",
    "href": "assets/presentation.html#how-can-we-do-this",
    "title": "Operationalizing available research computing resources for stock assessment",
    "section": "How can we do this?",
    "text": "How can we do this?\n\n\n\nHigh-throughput computing (HTC)\n\nHigh-performance computing (HPC)"
  },
  {
    "objectID": "assets/presentation.html#why-use-htchpc-computing",
    "href": "assets/presentation.html#why-use-htchpc-computing",
    "title": "Operationalizing available research computing resources for stock assessment",
    "section": "Why use HTC/HPC computing?",
    "text": "Why use HTC/HPC computing?\n\n\nEfficiency\nReproducibility\nDocumentation\nTransparency\nAutomation ?"
  },
  {
    "objectID": "assets/presentation.html#workflow",
    "href": "assets/presentation.html#workflow",
    "title": "Operationalizing available research computing resources for stock assessment",
    "section": "Workflow",
    "text": "Workflow\n\n\ncreate container\ncreate scripts\ntransfer files\nsubmit jobs\ntransfer files back to local machine\n\n\n\n\n\n\nNational Stock Assessment Science Seminar"
  },
  {
    "objectID": "assets/hera_documentation.html",
    "href": "assets/hera_documentation.html",
    "title": "Working with NOAA HPC Hera",
    "section": "",
    "text": "Open a terminal window (.e.g, command prompt or PowerShell), then open an ssh tunnel to Hera by using the following command:\n\nssh -m hmac-sha2-256-etm@openssh.com User.Name@hera-rsa.bastion.rdhpcs.noaa.gov -p22\n\nReplace User.Name with your NOAA HPC account name, and bastion with either boulder or princeton depending on which ‘bastion’ you wish to log-in through. Note that the flag -p22 specifies opening port 22 and is optional. When prompted, put in your password followed by the RSA authentication code:\n\nXXXXXXXXRSACODE\n\nIf you see the following then you have connected successfully:\n\n________________________________________________________\n|                                                        |\n|                                                        |\n|  Welcome to the Hera High Performance Computing system |\n|                                                        |\n|        This system is located in Fairmont, WV          |\n|                                                        |\n|          Please Submit Helpdesk Requests to:           |\n|               rdhpcs.hera.help@noaa.gov                |\n|                                                        |\n|________________________________________________________|\n\nNote that you will also see the following terminal output upon connecting:\n\nLocal port XXXXX forwarded to remote host.\nRemote port YYYYY forwarded to local host.\n\nWhere XXXXX and YYYYY are your 4-5 digit port forwarding numbers. Make note of what your local port number (XXXXX) is since this will be used for scp file transfer using an ssh tunnel.",
    "crumbs": [
      "Documentation",
      "Working with NOAA HPC Hera"
    ]
  },
  {
    "objectID": "assets/hera_documentation.html#connecting-to-hera-via-ssh",
    "href": "assets/hera_documentation.html#connecting-to-hera-via-ssh",
    "title": "Working with NOAA HPC Hera",
    "section": "",
    "text": "Open a terminal window (.e.g, command prompt or PowerShell), then open an ssh tunnel to Hera by using the following command:\n\nssh -m hmac-sha2-256-etm@openssh.com User.Name@hera-rsa.bastion.rdhpcs.noaa.gov -p22\n\nReplace User.Name with your NOAA HPC account name, and bastion with either boulder or princeton depending on which ‘bastion’ you wish to log-in through. Note that the flag -p22 specifies opening port 22 and is optional. When prompted, put in your password followed by the RSA authentication code:\n\nXXXXXXXXRSACODE\n\nIf you see the following then you have connected successfully:\n\n________________________________________________________\n|                                                        |\n|                                                        |\n|  Welcome to the Hera High Performance Computing system |\n|                                                        |\n|        This system is located in Fairmont, WV          |\n|                                                        |\n|          Please Submit Helpdesk Requests to:           |\n|               rdhpcs.hera.help@noaa.gov                |\n|                                                        |\n|________________________________________________________|\n\nNote that you will also see the following terminal output upon connecting:\n\nLocal port XXXXX forwarded to remote host.\nRemote port YYYYY forwarded to local host.\n\nWhere XXXXX and YYYYY are your 4-5 digit port forwarding numbers. Make note of what your local port number (XXXXX) is since this will be used for scp file transfer using an ssh tunnel.",
    "crumbs": [
      "Documentation",
      "Working with NOAA HPC Hera"
    ]
  },
  {
    "objectID": "assets/hera_documentation.html#transferring-files-tofrom-hera",
    "href": "assets/hera_documentation.html#transferring-files-tofrom-hera",
    "title": "Working with NOAA HPC Hera",
    "section": "2 Transferring files to/from Hera",
    "text": "2 Transferring files to/from Hera\n\n2.1 via scp using data transfer node (DTN)\nInformation in this section is largely based on this wiki(CAC login required). File transfer using a DTN is only possible from machines within the noaa.gov domain (VPN ok), and can only transfer files to the scratch directory. However, this is ok since it is recommended that input/output data files are stored in the scratch directory. Using a DTN is faster than using the ssh tunnel.\n\n\n\n\n\n\nNote\n\n\n\nThe scratch1/NMFS/project_name/ directory is a shared space (shared access and shared disk space) for all users of a project. Rather than dumping files into the root project directory (e.g., project_name/) it is better to place them in your own sub-directory. Since this sub-directory structure does not already exist you will need to log into Hera and create it:\n\nmkdir scratch1/NMFS/project_name/User.Name/\n\nThis will avoid over-writing other users’ work.\n\n\nFile transfer takes place via scp using:\n\nscp /path/to/local/file User.Name@dtn-hera.fairmont.rdhpcs.noaa.gov:/scratch1/NMFS/project_name/User.Name/\n\nand replace User.Name and project_name with your HPC account name and project.\nIf trying to transfer from a machine not within the NOAA domain (or on the VPN) you can use scp with an untrusted DTN:\n\nscp /path/to/local/file User.Name@udtn-hera.fairmont.rdhpcs.noaa.gov:/scratch1/data_untrusted/User.Name/\n\nNote that dtn-hera was changed to udtn-hera. As before replace User.Name with your HPC account name. Since files can not stay in the data_untrusted directory we will need to log in to Hera and move it to the correct project directory on scratch. Once logged in, moving the files can be done with rsync (CAC login required), and then they can be deleted from data_untrusted by:\n\nrsync -axv /scratch1/data_untrusted/User.Name/file /scratch1/NMFS/project_name/User.Name/\nrm /scratch1/data_untrusted/User.Name/file\n\nBe sure to replace User.Name and project_name with your HPC account name and project.\nFiles can be downloaded using scp from either the trusted (dtn) or untrusted (udtn) DTN:\n\nscp User.Name@dtn-hera.fairmont.rdhpcs.noaa.gov:/scratch1/NMFS/project_name/User.Name/file /path/to/local/file \n\n\n\n2.2 via scp using an ssh tunnel\nInformation in this section is largely based on this wiki (CAC login required). File transfer using an ssh tunnel is possible from all locations. Using the ssh tunnel for file transfer requires a two-step process with two active terminal windows (we suggest using PowerShell):\n\nIn the first terminal window, open an ssh connection to Hera with port forwarding:\n\n\nssh -m hmac-sha2-256-etm@openssh.com -LXXXXX:localhost:XXXXX User.Name@hera-rsa.bastion.rdhpcs.noaa.gov\n\nReplace XXXXX with your local port number. As before replace User.Name and bastion.\n\nIn the second terminal window you can check to see if the tunnel was properly created:\n\n\nssh -p XXXXX User.Name@localhost\n\nif you get prompted for your password then success! Press CONTROL+C to ignore this prompt. Staying within this 2nd terminal window use scp to transfer your file:\n\nscp -P XXXXX /path/to/local/file User.Name@localhost:/home/User.Name/\n\nThis will copy your file from your local machine into your home directory on Hera. Simply append additional directory structure to /home/User.Name/ to copy it into a sub-directory that you have created on Hera (e.g., /home/User.Name/sub/dir/). To transfer files into your scratch directory, specify the proper destination path (e.g., /scratch1/NMFS/project_name/User.Name/ where project_name is your HPC account project).\nTo download a file from Hera using scp and the ssh tunnel use the following:\n\nscp -P XXXXX User.Name@localhost:/home/User.Name/file_name /path/to/local/file",
    "crumbs": [
      "Documentation",
      "Working with NOAA HPC Hera"
    ]
  },
  {
    "objectID": "assets/web-about-nd.html",
    "href": "assets/web-about-nd.html",
    "title": "Nicholas Ducharme-Barth",
    "section": "",
    "text": "Nicholas Ducharme-Barth joined the Pacific Islands Fisheries Science Center in 2021. Previously, Nicholas worked at the Pacific Community (SPC) conducting pelagic stock assessments for the Western and Central Pacific Fisheries Commission (WCPFC). He received his B.S. in Mathematics from the College of William & Mary and his Ph. D. in Fisheries and Aquatic Sciences from the University of Florida.\n\n\n Back to top",
    "crumbs": [
      "Contact us",
      "Nicholas Ducharme-Barth"
    ]
  },
  {
    "objectID": "assets/array_hera.html",
    "href": "assets/array_hera.html",
    "title": "Working with NOAA HPC Hera",
    "section": "",
    "text": "In this example we step through submitting an array job on Hera where we want to run the same job in a number of directories. In this case the job is running a simple R script that reads in the .csv file stored in the directory, fits a linear model, and writes the paramter estimates to a .csv. We specify which directories we want to run jobs in as a part of the job-array using a text file to specify the directory path names on Hera.\nThe simple_r example can be set-up either by cloning the repository git clone https://github.com/N-DucharmeBarth-NOAA/noaa-hpc-hera.git, or stepping through the following code:\nDefine relative path and create directory if needed\n\n\n\n\n\n\nHard-coding alert!\n\n\n\nNote you will have to change proj_dir to match your machine path and also may need to change hera_project from “NMFS/htc4sa/” if you are under a different HPC project.\n\n\n\nproj_dir = \"D:/HOME/SAP/Code/noaa-hpc-hera/\"\ndir.create(proj_dir, recursive=TRUE)\nhera_project = \"NMFS/htc4sa/Nicholas.Ducharme-barth/\"\n\nDefine directory names\n\ndir_name = paste0(\"rep_0\", 0:9)",
    "crumbs": [
      "Documentation",
      "Submitting an array job"
    ]
  },
  {
    "objectID": "assets/array_hera.html#example-description-setup",
    "href": "assets/array_hera.html#example-description-setup",
    "title": "Working with NOAA HPC Hera",
    "section": "",
    "text": "In this example we step through submitting an array job on Hera where we want to run the same job in a number of directories. In this case the job is running a simple R script that reads in the .csv file stored in the directory, fits a linear model, and writes the paramter estimates to a .csv. We specify which directories we want to run jobs in as a part of the job-array using a text file to specify the directory path names on Hera.\nThe simple_r example can be set-up either by cloning the repository git clone https://github.com/N-DucharmeBarth-NOAA/noaa-hpc-hera.git, or stepping through the following code:\nDefine relative path and create directory if needed\n\n\n\n\n\n\nHard-coding alert!\n\n\n\nNote you will have to change proj_dir to match your machine path and also may need to change hera_project from “NMFS/htc4sa/” if you are under a different HPC project.\n\n\n\nproj_dir = \"D:/HOME/SAP/Code/noaa-hpc-hera/\"\ndir.create(proj_dir, recursive=TRUE)\nhera_project = \"NMFS/htc4sa/Nicholas.Ducharme-barth/\"\n\nDefine directory names\n\ndir_name = paste0(\"rep_0\", 0:9)",
    "crumbs": [
      "Documentation",
      "Submitting an array job"
    ]
  }
]